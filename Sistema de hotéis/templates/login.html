<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login ‚Äî Grand Palace Hotel</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <main class="page">
        <aside class="hero">
            <div class="brand">
                <img src="img/grand-palace-hotel.jpg" alt="foto Grand Palace Hotel" class="brand-foto">
                <div class="brand-overlay">
                    <h1>Grand Palace Hotel</h1>
                    <p>Conforto e eleg√¢ncia em cada estadia</p>
                </div>
            </div>
        </aside>

        <section class="login-card" aria-labelledby="login-title">
            <div class="card">
                <h2 id="login-title">Acesse sua conta</h2>
                <p class="muted">Fa√ßa login para gerenciar reservas e perfil</p>

                <form id="loginForm" novalidate>
                    <div id="formError" role="alert" aria-live="polite" style="display:none;color:#b00020;margin-bottom:8px"></div>

                    <label for="email">E-mail</label>
                    <input id="email" name="email" type="email" placeholder="seu@exemplo.com" required autofocus>

                    <label for="password">Senha</label>
                    <div class="password-row">
                        <input id="password" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" required>
            
                    </div>
                    <button class="btn-entrar" type="submit">Entrar</button>
                </form>
                <p class="signup">N√£o tem conta? <a href="cadastro.html">Cadastre-se</a></p>
            </div>
        </section>
        </main>

        <script src="js/app.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', ()=>{
                if(window.app) window.app.initLogin();
                const form = document.getElementById('loginForm');
                const err = document.getElementById('formError');
                const toggle = document.getElementById('togglePwd');
                const pwd = document.getElementById('password');

                if(toggle && pwd) toggle.addEventListener('click', ()=>{ const t = pwd.type === 'password' ? 'text' : 'password'; pwd.type = t; toggle.textContent = t === 'password' ? 'üëÅÔ∏è' : 'üôà'; });

                if(form){
                    form.addEventListener('submit', (e)=>{
                        e.preventDefault();
                        const email = form.email.value.trim();
                        const password = form.password.value;
                        if(!email || !/^\S+@\S+\.\S+$/.test(email)) { err.style.display='block'; err.textContent='Informe um e-mail v√°lido.'; form.email.focus(); return; }
                        if(!password || password.length < 6) { err.style.display='block'; err.textContent='Senha deve ter ao menos 6 caracteres.'; form.password.focus(); return; }

                        // usa app.login se dispon√≠vel (app.js)
                        if(window.app && window.app._db){
                            const res = (function(){ try{ return (window.app && window.app.requireAuth) ? null : null;}catch(e){return null;} })();
                        }

                        // delega a app.js (se existir)
                        if(window.app && window.app.initLogin){
                            // atual fun√ß√£o de login est√° em app.initLogin ‚Äî j√° inicializada
                            // apenas submeter para que app.js trate a autentica√ß√£o
                            // app.initLogin j√° vinculou o evento; podemos trigger manualmente
                            // como fallback, redirecionamos para dashboard
                            location.href='dashboard.html';
                        } else {
                            // fallback simples
                            location.href='dashboard.html';
                        }
                    });
                }
            });
        </script>

</body>

</html>